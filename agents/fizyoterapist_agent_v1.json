{
  "owner": "test",
  "agentId": "fizyoterapist_agent_v1",
  "agentName": "PhysioReha AI Fizyoterapist",
  "version": "1.0",
  "systemPrompt": "Sen profesyonel bir AI fizyoterapist asistanÄ±sÄ±n. Hasta deÄŸerlendirmesi, tedavi planlamasÄ± ve rehabilitasyon sÃ¼reÃ§lerinde uzmanlÄ±k saÄŸlarsÄ±n. Her hasta iÃ§in bireysel fiziksel deÄŸerlendirme yapar, kanÄ±ta dayalÄ± tedavi protokolleri oluÅŸturur ve ilerlemeyi sistematik olarak takip edersin. Spor yaralanmalarÄ±, ortopedik rehabilitasyon, nÃ¶rolojik fizyoterapi ve geriatrik fizyoterapi alanlarÄ±nda derin bilgiye sahipsin.\n\nğŸ¤– **TELEGRAM ENTEGRASYONUNDAKÄ° YETKÄ°LERÄ°N:**\n- Hastalara Telegram Ã¼zerinden egzersiz hatÄ±rlatmalarÄ±, ilerleme raporlarÄ± ve motivasyon mesajlarÄ± gÃ¶nderebilirsin\n- ZamanlanmÄ±ÅŸ mesajlarla hasta takibini sÃ¼rdÃ¼rebilir, tedavi uyumunu artÄ±rabilirsin\n- Telegram Ã¼zerinden hasta geri bildirimlerini alabilir ve tedavi planÄ±nÄ± gÃ¼ncelleyebilirsin\n- KullanÄ±cÄ± izni ile Telegram'a kiÅŸiselleÅŸtirilmiÅŸ egzersiz programlarÄ± ve eÄŸitim materyalleri gÃ¶nderebilirsin\n- Acil durumlarda hÄ±zlÄ± mÃ¼dahale Ã¶nerileri ve yÃ¶nlendirme yapabilirsin\n\nğŸ”§ **TOOL KULLANIM YÃ–NERGELERÄ°:**\n- Hasta Telegram mesajÄ± istediÄŸinde **telegram_bildirim** tool'unu kullan\n- Hasta verilerini kaydetmek/okumak iÃ§in **hasta_veritabani** tool'unu kullan\n- Egzersiz programlarÄ± iÃ§in **egzersiz_kutuphanesi_api** tool'unu kullan\n- Tool Ã§aÄŸÄ±rma formatÄ±: `[TOOL_CALL: tool_id, {\"param1\": \"value1\", \"param2\": \"value2\"}]`\n- Telegram mesajÄ± Ã¶rneÄŸi: `[TOOL_CALL: telegram_bildirim, {\"message\": \"ğŸƒâ€â™‚ï¸ Egzersiz zamanÄ±! BugÃ¼nkÃ¼ programÄ±nÄ±z hazÄ±r.\"}]`\n\nHer zaman kanÄ±ta dayalÄ± uygulamalarÄ± Ã¶nceler, hasta gÃ¼venliÄŸini en Ã¼st seviyede tutarsÄ±n. TÄ±bbi tanÄ± koymaz, sadece fizyoterapi kapsamÄ±ndaki deÄŸerlendirme ve Ã¶nerilerini sunarsÄ±n. Hasta motivasyonunu yÃ¼ksek tutmak iÃ§in pozitif ve destekleyici bir yaklaÅŸÄ±m benimser ve **gerÃ§ekten** Telegram mesajlarÄ± gÃ¶nderirsin.",
  "llmConfig": {
    "provider": "deepseek",
    "model": "deepseek-chat"
  },
  "dataSchema": {
    "collectionName": "fizyoterapist_verileri",
    "schema": {
      "type": "object",
      "properties": {
        "hasta_id": {
          "type": "string",
          "description": "Benzersiz hasta tanÄ±mlayÄ±cÄ±"
        },
        "demografik_bilgiler": {
          "type": "object",
          "properties": {
            "yas": {"type": "number"},
            "boy": {"type": "number"},
            "kilo": {"type": "number"},
            "cinsiyet": {"type": "string", "enum": ["erkek", "kadin", "diger"]},
            "meslek": {"type": "string"},
            "aktivite_seviyesi": {
              "type": "string",
              "enum": ["sedanter", "hafif", "orta", "aktif", "sporcu"]
            },
            "dominant_el": {"type": "string", "enum": ["sag", "sol", "cift"]}
          },
          "required": ["yas", "boy", "kilo", "cinsiyet", "aktivite_seviyesi"]
        },
        "tibbi_gecmis": {
          "type": "object",
          "properties": {
            "sikayet": {"type": "string"},
            "yaralanma_tarihi": {"type": "string", "format": "date"},
            "etkilenen_bolgeler": {"type": "array", "items": {"type": "string"}},
            "onceki_yaralanmalar": {"type": "array", "items": {"type": "string"}},
            "ameliyat_gecmisi": {"type": "array", "items": {"type": "string"}},
            "kullanilan_ilaclar": {"type": "array", "items": {"type": "string"}},
            "kontraendikasyonlar": {"type": "array", "items": {"type": "string"}}
          },
          "required": ["sikayet", "etkilenen_bolgeler"]
        },
        "fiziksel_degerlendirme": {
          "type": "object",
          "properties": {
            "postural_analiz": {"type": "string"},
            "hareket_acikligi": {
              "type": "object",
              "properties": {
                "boyun": {"type": "string"},
                "omuz": {"type": "string"},
                "dirsek": {"type": "string"},
                "el_bilegi": {"type": "string"},
                "omurga": {"type": "string"},
                "kalca": {"type": "string"},
                "diz": {"type": "string"},
                "ayak_bilegi": {"type": "string"}
              }
            },
            "kas_kuvveti": {
              "type": "object",
              "properties": {
                "ust_ekstremite": {"type": "string"},
                "govde": {"type": "string"},
                "alt_ekstremite": {"type": "string"}
              }
            },
            "agri_degerlendirme": {
              "type": "object",
              "properties": {
                "vas_skoru": {"type": "number", "minimum": 0, "maximum": 10},
                "agri_turu": {"type": "string"},
                "agri_bolgeleri": {"type": "array", "items": {"type": "string"}},
                "tetikleyici_faktorler": {"type": "array", "items": {"type": "string"}}
              }
            },
            "fonksiyonel_testler": {
              "type": "array",
              "items": {
                "type": "object",
                "properties": {
                  "test_adi": {"type": "string"},
                  "sonuc": {"type": "string"},
                  "puan": {"type": "number"}
                }
              }
            }
          }
        },
        "tedavi_planlari": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "plan_tarihi": {"type": "string", "format": "date"},
              "faz": {
                "type": "string",
                "enum": ["akut", "subakut", "kuvvet", "fonksiyonel", "bakim"]
              },
              "hedefler": {"type": "array", "items": {"type": "string"}},
              "egzersiz_programi": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "egzersiz_adi": {"type": "string"},
                    "set": {"type": "number"},
                    "tekrar": {"type": "number"},
                    "sure": {"type": "string"},
                    "yogunluk": {"type": "string"},
                    "aciklama": {"type": "string"}
                  }
                }
              },
              "manuel_terapi": {"type": "array", "items": {"type": "string"}},
              "modaliteler": {"type": "array", "items": {"type": "string"}},
              "ev_programi": {"type": "array", "items": {"type": "string"}}
            }
          }
        },
        "ilerleme_takibi": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "tarih": {"type": "string", "format": "date"},
              "agri_skoru": {"type": "number", "minimum": 0, "maximum": 10},
              "fonksiyonel_durum": {"type": "string"},
              "hareket_acikligi_degerlendirme": {"type": "string"},
              "hasta_geri_bildirimi": {"type": "string"},
              "objektif_bulgular": {"type": "string"},
              "plan_degisiklikleri": {"type": "string"},
              "bir_sonraki_hedefler": {"type": "array", "items": {"type": "string"}}
            }
          }
        }
      },
      "required": ["hasta_id", "demografik_bilgiler", "tibbi_gecmis"]
    }
  },
  "tools": [
    {
      "toolId": "hasta_veritabani",
      "name": "Hasta VeritabanÄ± Ä°ÅŸlemleri",
      "type": "DATABASE",
      "description": "MongoDB veritabanÄ±nda hasta verilerini yÃ¶netmek iÃ§in kullanÄ±lÄ±r",
      "config": {
        "operation": "find_documents"
      }
    },
    {
      "toolId": "egzersiz_kutuphanesi_api",
      "name": "Egzersiz KÃ¼tÃ¼phanesi API",
      "type": "API",
      "description": "KapsamlÄ± egzersiz veritabanÄ±ndan uygun egzersizleri almak iÃ§in kullanÄ±lÄ±r",
      "endpoint": "https://api.exercisedb.io/exercises",
      "config": {
        "method": "GET",
        "timeout": 10
      }
    },
    {
      "toolId": "fizyoterapi_kaynaklar_rss",
      "name": "Fizyoterapi KaynaklarÄ± RSS",
      "type": "RSS",
      "description": "GÃ¼ncel fizyoterapi araÅŸtÄ±rmalarÄ± ve klinik gÃ¼ncellemelerini takip etmek iÃ§in kullanÄ±lÄ±r",
      "endpoint": "https://www.physiotherapy-journal.com/rss",
      "config": {
        "update_interval": 7200
      }
    },
    {
      "toolId": "degerlendirme_araclarÄ±",
      "name": "DeÄŸerlendirme AraÃ§larÄ±",
      "type": "API",
      "description": "Standardize fizyoterapi deÄŸerlendirme testlerini ve skorlarÄ±nÄ± hesaplamak iÃ§in kullanÄ±lÄ±r",
      "endpoint": "https://api.physioassessment.com/tools",
      "config": {
        "method": "POST",
        "timeout": 15
      }
    },
    {
      "toolId": "telegram_bildirim",
      "name": "Telegram Bildirim Sistemi",
      "type": "TELEGRAM",
      "description": "Hastalara Telegram Ã¼zerinden egzersiz hatÄ±rlatmalarÄ±, ilerleme raporlarÄ± ve motivasyon mesajlarÄ± gÃ¶ndermek iÃ§in kullanÄ±lÄ±r",
      "config": {
        "method": "sendMessage",
        "parse_mode": "Markdown"
      }
    }
  ],
  "workflows": [
    {
      "workflowId": "yeni_hasta_degerlendirme",
      "description": "Yeni hasta iÃ§in kapsamlÄ± fiziksel deÄŸerlendirme ve baÅŸlangÄ±Ã§ tedavi planÄ± oluÅŸturma",
      "trigger": "yeni_hasta",
      "nodes": [
        {
          "nodeId": "1",
          "type": "llm_prompt",
          "prompt": "Hastadan demografik bilgilerini al: yaÅŸ, boy, kilo, cinsiyet, meslek, aktivite seviyesi",
          "output_variable": "demografik_bilgiler"
        },
        {
          "nodeId": "2",
          "type": "llm_prompt",
          "prompt": "HastanÄ±n tÄ±bbi geÃ§miÅŸini Ã¶ÄŸren: ÅŸikayet, yaralanma tarihi, etkilenen bÃ¶lgeler, Ã¶nceki yaralanmalar",
          "output_variable": "tibbi_gecmis"
        },
        {
          "nodeId": "3",
          "type": "llm_prompt",
          "prompt": "Fiziksel deÄŸerlendirme yap: postural analiz, hareket aÃ§Ä±klÄ±ÄŸÄ±, kas kuvveti, aÄŸrÄ± deÄŸerlendirme",
          "output_variable": "fiziksel_degerlendirme"
        },
        {
          "nodeId": "4",
          "type": "tool_call",
          "toolId": "degerlendirme_araclarÄ±",
          "params": {
            "assessment_type": "comprehensive",
            "patient_data": "$demografik_bilgiler",
            "clinical_findings": "$fiziksel_degerlendirme"
          },
          "output_variable": "degerlendirme_sonucu"
        },
        {
          "nodeId": "5",
          "type": "tool_call",
          "toolId": "hasta_veritabani",
          "params": {
            "operation": "insert_document",
            "collection_name": "fizyoterapist_verileri",
            "document": {
              "hasta_id": "$user_id",
              "demografik_bilgiler": "$demografik_bilgiler",
              "tibbi_gecmis": "$tibbi_gecmis",
              "fiziksel_degerlendirme": "$fiziksel_degerlendirme",
              "degerlendirme_tarihi": "$current_date"
            }
          },
          "output_variable": "kayit_sonucu"
        },
        {
          "nodeId": "6",
          "type": "tool_call",
          "toolId": "egzersiz_kutuphanesi_api",
          "params": {
            "target_muscle": "$fiziksel_degerlendirme.etkilenen_bolgeler",
            "difficulty": "beginner",
            "type": "rehabilitation"
          },
          "output_variable": "uygun_egzersizler"
        },
        {
          "nodeId": "7",
          "type": "llm_prompt",
          "prompt": "DeÄŸerlendirme sonuÃ§larÄ±na gÃ¶re kiÅŸiselleÅŸtirilmiÅŸ tedavi planÄ± oluÅŸtur: $degerlendirme_sonucu, $uygun_egzersizler",
          "output_variable": "tedavi_plani"
        },
        {
          "nodeId": "8",
          "type": "send_response",
          "message": "DeÄŸerlendirmeniz tamamlandÄ±! KiÅŸiselleÅŸtirilmiÅŸ tedavi planÄ±nÄ±z hazÄ±rlandÄ±: $tedavi_plani"
        }
      ]
    },
    {
      "workflowId": "ilerleme_degerlendirme",
      "description": "HastanÄ±n ilerlemesini deÄŸerlendirme ve tedavi planÄ±nÄ± gÃ¼ncelleme",
      "trigger": "ilerleme_kontrol",
      "nodes": [
        {
          "nodeId": "1",
          "type": "llm_prompt",
          "prompt": "Hastadan gÃ¼ncel durumunu Ã¶ÄŸren: aÄŸrÄ± seviyesi, fonksiyonel durum, egzersiz uyumu",
          "output_variable": "guncel_durum"
        },
        {
          "nodeId": "2",
          "type": "tool_call",
          "toolId": "hasta_veritabani",
          "params": {
            "operation": "find_documents",
            "collection_name": "fizyoterapist_verileri",
            "query": {"hasta_id": "$user_id"},
            "sort": {"degerlendirme_tarihi": -1},
            "limit": 1
          },
          "output_variable": "onceki_veriler"
        },
        {
          "nodeId": "3",
          "type": "tool_call",
          "toolId": "degerlendirme_araclarÄ±",
          "params": {
            "assessment_type": "progress",
            "baseline_data": "$onceki_veriler",
            "current_data": "$guncel_durum"
          },
          "output_variable": "ilerleme_analizi"
        },
        {
          "nodeId": "4",
          "type": "llm_prompt",
          "prompt": "Ä°lerleme analizine gÃ¶re tedavi planÄ±nÄ± gÃ¼ncelle: $ilerleme_analizi",
          "output_variable": "guncellenmis_plan"
        },
        {
          "nodeId": "5",
          "type": "tool_call",
          "toolId": "hasta_veritabani",
          "params": {
            "operation": "update_document",
            "collection_name": "fizyoterapist_verileri",
            "query": {"hasta_id": "$user_id"},
            "update": {
              "$push": {
                "ilerleme_takibi": {
                  "tarih": "$current_date",
                  "agri_skoru": "$guncel_durum.agri_skoru",
                  "fonksiyonel_durum": "$guncel_durum.fonksiyonel_durum",
                  "hasta_geri_bildirimi": "$guncel_durum.geri_bildirim",
                  "plan_degisiklikleri": "$guncellenmis_plan"
                }
              }
            }
          },
          "output_variable": "guncelleme_sonucu"
        },
        {
          "nodeId": "6",
          "type": "send_response",
          "message": "Ä°lerleme deÄŸerlendirmeniz tamamlandÄ±! Analiz: $ilerleme_analizi. GÃ¼ncellenmiÅŸ planÄ±nÄ±z: $guncellenmis_plan"
        }
      ]
    },
    {
      "workflowId": "gunluk_egzersiz_plani",
      "description": "HastanÄ±n durumuna gÃ¶re gÃ¼nlÃ¼k egzersiz programÄ± oluÅŸturma",
      "trigger": "egzersiz_plani_iste",
      "nodes": [
        {
          "nodeId": "1",
          "type": "tool_call",
          "toolId": "hasta_veritabani",
          "params": {
            "operation": "find_documents",
            "collection_name": "fizyoterapist_verileri",
            "query": {"hasta_id": "$user_id"},
            "limit": 1
          },
          "output_variable": "hasta_profili"
        },
        {
          "nodeId": "2",
          "type": "llm_prompt",
          "prompt": "HastanÄ±n gÃ¼ncel durumunu Ã¶ÄŸren: enerji seviyesi, aÄŸrÄ± durumu, mevcut zaman",
          "output_variable": "guncel_durum"
        },
        {
          "nodeId": "3",
          "type": "tool_call",
          "toolId": "egzersiz_kutuphanesi_api",
          "params": {
            "target_area": "$hasta_profili.etkilenen_bolgeler",
            "intensity": "$guncel_durum.enerji_seviyesi",
            "duration": "$guncel_durum.mevcut_zaman"
          },
          "output_variable": "uygun_egzersizler"
        },
        {
          "nodeId": "4",
          "type": "llm_prompt",
          "prompt": "Hasta profiline gÃ¶re kiÅŸiselleÅŸtirilmiÅŸ gÃ¼nlÃ¼k egzersiz programÄ± hazÄ±rla: $hasta_profili, $uygun_egzersizler",
          "output_variable": "gunluk_program"
        },
        {
          "nodeId": "5",
          "type": "send_response",
          "message": "BugÃ¼nkÃ¼ egzersiz programÄ±nÄ±z: $gunluk_program"
        }
      ]
    },
    {
      "workflowId": "arastirma_guncellemeleri",
      "description": "GÃ¼ncel fizyoterapi araÅŸtÄ±rmalarÄ± ve klinik gÃ¼ncellemelerini Ã¶zetleme",
      "trigger": "arastirma_ozeti",
      "nodes": [
        {
          "nodeId": "1",
          "type": "tool_call",
          "toolId": "fizyoterapi_kaynaklar_rss",
          "params": {},
          "output_variable": "guncel_arastirmalar"
        },
        {
          "nodeId": "2",
          "type": "llm_prompt",
          "prompt": "Fizyoterapi ve rehabilitasyon alanÄ±ndaki gÃ¼ncel araÅŸtÄ±rmalarÄ± Ã¶zetle: $guncel_arastirmalar",
          "output_variable": "arastirma_ozeti"
        },
        {
          "nodeId": "3",
          "type": "send_response",
          "message": "GÃ¼ncel fizyoterapi araÅŸtÄ±rmalarÄ± Ã¶zeti: $arastirma_ozeti"
        }
      ]
    }
  ],
  "schedules": [
    {
      "scheduleId": "haftalik_ilerleme_kontrol",
      "description": "Her hafta hasta ilerlemesini kontrol et",
      "cron": "0 14 * * 1",
      "workflowId": "ilerleme_degerlendirme"
    },
    {
      "scheduleId": "gunluk_egzersiz_hatirlatici",
      "description": "GÃ¼nlÃ¼k egzersiz programÄ± hatÄ±rlatÄ±cÄ±sÄ±",
      "cron": "0 9 * * *",
      "workflowId": "gunluk_egzersiz_plani"
    },
    {
      "scheduleId": "haftalik_arastirma_ozeti",
      "description": "HaftalÄ±k araÅŸtÄ±rma gÃ¼ncellemeleri",
      "cron": "0 17 * * 5",
      "workflowId": "arastirma_guncellemeleri"
    }
  ]
} 