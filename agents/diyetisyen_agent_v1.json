{
  "owner": "test",
  "agentId": "diyetisyen_agent_v1",
  "agentName": "SmartDiet AI Diyetisyen",
  "version": "1.0",
  "systemPrompt": "Sen bir profesyonel diyetisyen AI asistanÄ±sÄ±n. KullanÄ±cÄ±larÄ±n saÄŸlÄ±k durumlarÄ±na, hedeflerine ve yaÅŸam tarzlarÄ±na uygun kiÅŸiselleÅŸtirilmiÅŸ beslenme programlarÄ± oluÅŸturmalarÄ±na yardÄ±mcÄ± olacaksÄ±n. Her kullanÄ±cÄ± iÃ§in detaylÄ± profil oluÅŸturup, bilimsel verilere dayalÄ± beslenme planlarÄ± hazÄ±rlayacaksÄ±n. ProgramlarÄ± dÃ¼zenli olarak takip edecek, kullanÄ±cÄ± geri bildirimlerini deÄŸerlendirecek ve gerektiÄŸinde planlarÄ± gÃ¼ncelleyeceksin. TÃ¼m verileri organize ÅŸekilde veritabanÄ±na kaydedecek ve kullanÄ±cÄ±larÄ±n ilerlemesini gÃ¶rsel raporlarla sunacaksÄ±n. Daima profesyonel, motive edici ve destekleyici bir dil kullan. TÄ±bbi teÅŸhis koyma, sadece genel beslenme Ã¶nerileri sun.\n\nÃ–NEMLÄ° FORMAT KURALLARI:\n1. **TABLOLAR KULLAN**: Besin bilgileri, kalori hesaplamalarÄ±, program karÅŸÄ±laÅŸtÄ±rmalarÄ± iÃ§in MUTLAKA tablo formatÄ± kullan\n2. **VÄ°ZUAL DÄ°YAGRAMLAR**: SÃ¼reÃ§ akÄ±ÅŸlarÄ±, beslenme dÃ¶ngÃ¼leri iÃ§in Mermaid diyagramlarÄ± kullan\n3. **MARKDOWN**: BaÅŸlÄ±klar iÃ§in #, listeler iÃ§in -, tablolar iÃ§in | kullan\n\nÃ–RNEK FORMATLAR:\n\n## ğŸ“Š GÃ¼nlÃ¼k Beslenme PlanÄ±\n\n### KahvaltÄ± (07:00-09:00)\n| Besin | Miktar | Kalori | Protein | Karbonhidrat | YaÄŸ |\n|-------|--------|--------|---------|--------------|-----|\n| Yumurta | 2 adet | 140 | 12g | 1g | 10g |\n| Tam tahÄ±l ekmek | 1 dilim | 80 | 3g | 15g | 1g |\n| Avokado | 1/2 adet | 120 | 2g | 6g | 11g |\n| **TOPLAM** | - | **340** | **17g** | **22g** | **22g** |\n\n### ğŸ”„ Beslenme SÃ¼reci (Mermaid Diyagram)\n```mermaid\nflowchart TD\n    A[KahvaltÄ± 07:00] --> B[Ara Ã–ÄŸÃ¼n 10:00]\n    B --> C[Ã–ÄŸle 12:30]\n    C --> D[Ara Ã–ÄŸÃ¼n 15:30]\n    D --> E[AkÅŸam 19:00]\n    E --> F[Gece 21:00]\n    F --> G[Uyku 23:00]\n    G --> A\n```\n\n### ğŸ“ˆ HaftalÄ±k Ä°lerleme Tablosu\n| GÃ¼n | Hedef Kalori | AlÄ±nan Kalori | Fark | Durum |\n|-----|-------------|---------------|------|-------|\n| Pazartesi | 2000 | 1950 | -50 | âœ… Ä°yi |\n| SalÄ± | 2000 | 2100 | +100 | âš ï¸ Fazla |\n\nHer yanÄ±tÄ±nda mÃ¼mkÃ¼n olduÄŸunca tablo ve gÃ¶rsel diyagram kullan!",
  "llmConfig": {
    "provider": "deepseek",
    "model": "deepseek-chat"
  },
  "dataSchema": {
    "collectionName": "diyetisyen_verileri",
    "schema": {
      "type": "object",
      "properties": {
        "kullanici_id": {
          "type": "string",
          "description": "Benzersiz kullanÄ±cÄ± tanÄ±mlayÄ±cÄ±"
        },
        "temel_bilgiler": {
          "type": "object",
          "properties": {
            "yas": {"type": "number"},
            "boy": {"type": "number"},
            "baslangic_kilo": {"type": "number"},
            "cinsiyet": {"type": "string", "enum": ["erkek", "kadin", "diger"]},
            "aktivite_seviyesi": {
              "type": "string",
              "enum": ["sedanter", "hafif", "orta", "aktif", "cok_aktif"]
            }
          },
          "required": ["yas", "boy", "baslangic_kilo", "cinsiyet", "aktivite_seviyesi"]
        },
        "saglik_bilgileri": {
          "type": "object",
          "properties": {
            "alerjiler": {"type": "array", "items": {"type": "string"}},
            "kronik_rahatsizliklar": {"type": "array", "items": {"type": "string"}},
            "kullanilan_ilaclar": {"type": "array", "items": {"type": "string"}}
          }
        },
        "hedefler": {
          "type": "object",
          "properties": {
            "ana_hedef": {
              "type": "string",
              "enum": ["kilo_verme", "kilo_alma", "kas_kazanma", "koruma", "dengeli_beslenme"]
            },
            "hedef_kilo": {"type": "number"},
            "haftalik_hedef": {"type": "number"},
            "beslenme_tercihleri": {
              "type": "array",
              "items": {"type": "string"}
            }
          },
          "required": ["ana_hedef"]
        },
        "diyet_planlari": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "tarih": {"type": "string", "format": "date"},
              "gunluk_kalori": {"type": "number"},
              "makro_dagilim": {
                "type": "object",
                "properties": {
                  "protein": {"type": "number"},
                  "karbonhidrat": {"type": "number"},
                  "yag": {"type": "number"}
                }
              },
              "ogunler": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "ogun_adi": {"type": "string"},
                    "besinler": {"type": "array", "items": {"type": "string"}},
                    "kalori": {"type": "number"},
                    "aciklama": {"type": "string"}
                  }
                }
              }
            }
          }
        },
        "takip_verileri": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "tarih": {"type": "string", "format": "date"},
              "kilo": {"type": "number"},
              "vucut_olcumleri": {
                "type": "object",
                "properties": {
                  "bel": {"type": "number"},
                  "kalca": {"type": "number"},
                  "gogus": {"type": "number"}
                }
              },
              "degerlendirme": {"type": "string"},
              "program_degisiklikleri": {"type": "string"}
            }
          }
        }
      },
      "required": ["kullanici_id", "temel_bilgiler", "hedefler"]
    }
  },
  "tools": [
    {
      "toolId": "veritabani_islemleri",
      "name": "VeritabanÄ± Ä°ÅŸlemleri",
      "type": "DATABASE",
      "description": "MongoDB veritabanÄ±nda kullanÄ±cÄ± verilerini yÃ¶netmek iÃ§in kullanÄ±lÄ±r",
      "config": {
        "operation": "find_documents"
      }
    },
    {
      "toolId": "besin_bilgileri_api",
      "name": "Besin Bilgileri API",
      "type": "API",
      "description": "Besin deÄŸerlerini ve kalori bilgilerini almak iÃ§in kullanÄ±lÄ±r",
      "endpoint": "https://api.edamam.com/api/nutrition-data",
      "config": {
        "method": "GET",
        "timeout": 10
      }
    },
    {
      "toolId": "saglik_haberleri_rss",
      "name": "SaÄŸlÄ±k Haberleri RSS",
      "type": "RSS",
      "description": "GÃ¼ncel beslenme ve saÄŸlÄ±k haberlerini takip etmek iÃ§in kullanÄ±lÄ±r",
      "endpoint": "https://www.medicalnewstoday.com/rss",
      "config": {
        "update_interval": 3600
      }
    }
  ],
  "workflows": [
    {
      "workflowId": "yeni_kullanici_kayit",
      "description": "Yeni kullanÄ±cÄ± iÃ§in profil oluÅŸturma ve baÅŸlangÄ±Ã§ diyet planÄ± hazÄ±rlama",
      "trigger": "yeni_kullanici",
      "nodes": [
        {
          "nodeId": "1",
          "type": "llm_prompt",
          "prompt": "KullanÄ±cÄ±dan temel bilgilerini al: yaÅŸ, boy, kilo, cinsiyet, aktivite seviyesi",
          "output_variable": "temel_bilgiler"
        },
        {
          "nodeId": "2",
          "type": "llm_prompt",
          "prompt": "KullanÄ±cÄ±nÄ±n saÄŸlÄ±k durumunu Ã¶ÄŸren: alerjiler, kronik hastalÄ±klar, kullandÄ±ÄŸÄ± ilaÃ§lar",
          "output_variable": "saglik_bilgileri"
        },
        {
          "nodeId": "3",
          "type": "llm_prompt",
          "prompt": "KullanÄ±cÄ±nÄ±n hedeflerini belirle: kilo verme/alma, kas kazanma, beslenme tercihleri",
          "output_variable": "hedefler"
        },
        {
          "nodeId": "4",
          "type": "tool_call",
          "toolId": "veritabani_islemleri",
          "params": {
            "operation": "insert_document",
            "collection_name": "diyetisyen_verileri",
            "document": {
              "kullanici_id": "$user_id",
              "temel_bilgiler": "$temel_bilgiler",
              "saglik_bilgileri": "$saglik_bilgileri",
              "hedefler": "$hedefler",
              "olusturma_tarihi": "$current_date"
            }
          },
          "output_variable": "kayit_sonucu"
        },
        {
          "nodeId": "5",
          "type": "llm_prompt",
          "prompt": "Toplanan bilgilere gÃ¶re kiÅŸiselleÅŸtirilmiÅŸ baÅŸlangÄ±Ã§ diyet planÄ± oluÅŸtur",
          "output_variable": "baslangic_plani"
        },
        {
          "nodeId": "6",
          "type": "send_response",
          "message": "HoÅŸ geldiniz! Profiliniz baÅŸarÄ±yla oluÅŸturuldu ve size Ã¶zel diyet planÄ±nÄ±z hazÄ±rlandÄ±: $baslangic_plani"
        }
      ]
    },
    {
      "workflowId": "haftalik_takip",
      "description": "KullanÄ±cÄ±nÄ±n haftalÄ±k ilerlemesini deÄŸerlendirme ve plan gÃ¼ncelleme",
      "trigger": "haftalik_kontrol",
      "nodes": [
        {
          "nodeId": "1",
          "type": "llm_prompt",
          "prompt": "KullanÄ±cÄ±dan gÃ¼ncel kilo ve vÃ¼cut Ã¶lÃ§Ã¼mlerini iste",
          "output_variable": "guncel_olcumler"
        },
        {
          "nodeId": "2",
          "type": "tool_call",
          "toolId": "veritabani_islemleri",
          "params": {
            "operation": "find_documents",
            "collection_name": "diyetisyen_verileri",
            "query": {"kullanici_id": "$user_id"},
            "limit": 1
          },
          "output_variable": "kullanici_verileri"
        },
        {
          "nodeId": "3",
          "type": "llm_prompt",
          "prompt": "Ã–nceki verilerle karÅŸÄ±laÅŸtÄ±rarak ilerlemeyi analiz et: $kullanici_verileri vs $guncel_olcumler",
          "output_variable": "ilerleme_analizi"
        },
        {
          "nodeId": "4",
          "type": "llm_prompt",
          "prompt": "Ä°lerleme analizine gÃ¶re diyet planÄ±nÄ± gÃ¼ncelle ve Ã¶neriler sun",
          "output_variable": "guncellenmis_plan"
        },
        {
          "nodeId": "5",
          "type": "tool_call",
          "toolId": "veritabani_islemleri",
          "params": {
            "operation": "update_document",
            "collection_name": "diyetisyen_verileri",
            "query": {"kullanici_id": "$user_id"},
            "update": {
              "$push": {
                "takip_verileri": {
                  "tarih": "$current_date",
                  "kilo": "$guncel_olcumler.kilo",
                  "vucut_olcumleri": "$guncel_olcumler.olcumler",
                  "degerlendirme": "$ilerleme_analizi",
                  "program_degisiklikleri": "$guncellenmis_plan"
                }
              }
            }
          },
          "output_variable": "guncelleme_sonucu"
        },
        {
          "nodeId": "6",
          "type": "send_response",
          "message": "HaftalÄ±k deÄŸerlendirmeniz tamamlandÄ±! Ä°lerleme: $ilerleme_analizi. GÃ¼ncellenmiÅŸ planÄ±nÄ±z: $guncellenmis_plan"
        }
      ]
    },
    {
      "workflowId": "gunluk_menu_onerisi",
      "description": "KullanÄ±cÄ±nÄ±n tercihlerine gÃ¶re gÃ¼nlÃ¼k menÃ¼ Ã¶nerisi",
      "trigger": "menu_iste",
      "nodes": [
        {
          "nodeId": "1",
          "type": "tool_call",
          "toolId": "veritabani_islemleri",
          "params": {
            "operation": "find_documents",
            "collection_name": "diyetisyen_verileri",
            "query": {"kullanici_id": "$user_id"},
            "limit": 1
          },
          "output_variable": "kullanici_profili"
        },
        {
          "nodeId": "2",
          "type": "llm_prompt",
          "prompt": "KullanÄ±cÄ± profiline gÃ¶re gÃ¼nlÃ¼k menÃ¼ Ã¶nerisi hazÄ±rla: $kullanici_profili",
          "output_variable": "gunluk_menu"
        },
        {
          "nodeId": "3",
          "type": "tool_call",
          "toolId": "besin_bilgileri_api",
          "params": {
            "app_id": "nutrition_app",
            "app_key": "nutrition_key",
            "ingr": "$gunluk_menu"
          },
          "output_variable": "besin_degerleri"
        },
        {
          "nodeId": "4",
          "type": "send_response",
          "message": "BugÃ¼nkÃ¼ menÃ¼ Ã¶neriniz: $gunluk_menu. Toplam besin deÄŸerleri: $besin_degerleri"
        }
      ]
    },
    {
      "workflowId": "saglik_haberleri_ozeti",
      "description": "GÃ¼ncel saÄŸlÄ±k ve beslenme haberlerini Ã¶zetleme",
      "trigger": "haber_ozeti",
      "nodes": [
        {
          "nodeId": "1",
          "type": "tool_call",
          "toolId": "saglik_haberleri_rss",
          "params": {},
          "output_variable": "guncel_haberler"
        },
        {
          "nodeId": "2",
          "type": "llm_prompt",
          "prompt": "Beslenme ve diyet ile ilgili haberleri Ã¶zetle: $guncel_haberler",
          "output_variable": "haber_ozeti"
        },
        {
          "nodeId": "3",
          "type": "send_response",
          "message": "GÃ¼ncel beslenme haberleri Ã¶zeti: $haber_ozeti"
        }
      ]
    }
  ],
  "schedules": [
    {
      "scheduleId": "haftalik_kontrol",
      "description": "Her hafta kullanÄ±cÄ± ilerlemesini kontrol et",
      "cron": "0 10 * * 1",
      "workflowId": "haftalik_takip"
    },
    {
      "scheduleId": "gunluk_motivasyon",
      "description": "GÃ¼nlÃ¼k motivasyon mesajÄ± gÃ¶nder",
      "cron": "0 8 * * *",
      "workflowId": "gunluk_menu_onerisi"
    },
    {
      "scheduleId": "haftalik_haber_ozeti",
      "description": "HaftalÄ±k saÄŸlÄ±k haberleri Ã¶zeti",
      "cron": "0 18 * * 5",
      "workflowId": "saglik_haberleri_ozeti"
    }
  ]
} 